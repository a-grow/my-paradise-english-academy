<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>My Paradise English</title>
	</head>
	<body>
		<h2>Weekly Schedule</h2>
		<div id="schedule-display">
			If you see this, the schedule didn’t load. Try refreshing or check the
			console.
		</div>

		<script type="module">
			import { createClient } from "https://cdn.jsdelivr.net/npm/@supabase/supabase-js/+esm";

			const supabase = createClient(
				"https://pzvnjadsbdzzowlavufz.supabase.co",
				"sb_publishable_RGCE9NwkOsS3pPHRWBZd2wg_lh7As1-Y"
			);

			async function loadSchedule() {
				try {
					const { data, error } = await supabase
						.from("schedule")
						.select("*")
						.order("id", { ascending: true });

					if (error) {
						console.error("Error loading schedule:", error);
						return;
					}

					const container = document.getElementById("schedule-display");
					container.innerHTML = "";

					data.forEach((entry) => {
						const row = document.createElement("div");
						row.innerHTML = `
				<strong>${entry.book_level}</strong> — ${entry.day} ${entry.start_time}–${entry.end_time} (${entry.status})
			`;
						container.appendChild(row);
					});
				} catch (err) {
					console.error("Unexpected error loading schedule:", err);
				}
			}

			document.addEventListener("DOMContentLoaded", loadSchedule);
		</script>
	</body>
</html>
